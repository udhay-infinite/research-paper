<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="Generator" content="Microsoft Word 15 (filtered)">
<title>Project 4</title>
<style>
<!-- /* Font Definitions */
@font-face {
	font-family: Wingdings;
	panose-1: 5 0 0 0 0 0 0 0 0 0;
}

@font-face {
	font-family: "Cambria Math";
	panose-1: 2 4 5 3 5 4 6 3 2 4;
}

@font-face {
	font-family: Calibri;
	panose-1: 2 15 5 2 2 2 4 3 2 4;
}

@font-face {
	font-family: Consolas;
	panose-1: 2 11 6 9 2 2 4 3 2 4;
}

@font-face {
	font-family: Cambria;
	panose-1: 2 4 5 3 5 4 6 3 2 4;
}

@font-face {
	font-family: "Andale Sans UI";
}

@font-face {
	font-family: Lucidasans;
}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal {
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

h1 {
	mso-style-link: "Heading 1 Char";
	margin-top: 24.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
}

h1.CxSpFirst {
	mso-style-link: "Heading 1 Char";
	margin-top: 24.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
}

h1.CxSpMiddle {
	mso-style-link: "Heading 1 Char";
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
}

h1.CxSpLast {
	mso-style-link: "Heading 1 Char";
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
}

h2 {
	mso-style-link: "Heading 2 Char";
	margin-top: 10.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 13.0pt;
	font-family: "Cambria", serif;
}

h3 {
	mso-style-link: "Heading 3 Char";
	margin-top: 10.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 112%;
	font-size: 10.0pt;
	font-family: "Cambria", serif;
}

h4 {
	mso-style-link: "Heading 4 Char";
	margin-top: 10.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 10.0pt;
	font-family: "Cambria", serif;
	font-style: italic;
}

h5 {
	mso-style-link: "Heading 5 Char";
	margin-top: 10.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 10.0pt;
	font-family: "Cambria", serif;
	color: #7F7F7F;
}

h6 {
	mso-style-link: "Heading 6 Char";
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 112%;
	font-size: 10.0pt;
	font-family: "Cambria", serif;
	color: #7F7F7F;
	font-style: italic;
}

p.MsoHeading7, li.MsoHeading7, div.MsoHeading7 {
	mso-style-link: "Heading 7 Char";
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 10.0pt;
	font-family: "Cambria", serif;
	font-style: italic;
}

p.MsoHeading8, li.MsoHeading8, div.MsoHeading8 {
	mso-style-link: "Heading 8 Char";
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 10.0pt;
	font-family: "Cambria", serif;
}

p.MsoHeading9, li.MsoHeading9, div.MsoHeading9 {
	mso-style-link: "Heading 9 Char";
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 10.0pt;
	font-family: "Cambria", serif;
	letter-spacing: .25pt;
	font-style: italic;
}

p.MsoFooter, li.MsoFooter, div.MsoFooter {
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoCaption, li.MsoCaption, div.MsoCaption {
	margin-top: 6.0pt;
	margin-right: 0in;
	margin-bottom: 6.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 12.0pt;
	font-family: "Calibri", sans-serif;
	font-style: italic;
}

p.MsoList, li.MsoList, div.MsoList {
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 6.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoTitle, li.MsoTitle, div.MsoTitle {
	mso-style-link: "Title Char";
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: 0in;
	border: none;
	padding: 0in;
	font-size: 26.0pt;
	font-family: "Cambria", serif;
	letter-spacing: .25pt;
}

p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst {
	mso-style-link: "Title Char";
	margin: 0in;
	margin-bottom: .0001pt;
	border: none;
	padding: 0in;
	font-size: 26.0pt;
	font-family: "Cambria", serif;
	letter-spacing: .25pt;
}

p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle {
	mso-style-link: "Title Char";
	margin: 0in;
	margin-bottom: .0001pt;
	border: none;
	padding: 0in;
	font-size: 26.0pt;
	font-family: "Cambria", serif;
	letter-spacing: .25pt;
}

p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast {
	mso-style-link: "Title Char";
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: 0in;
	border: none;
	padding: 0in;
	font-size: 26.0pt;
	font-family: "Cambria", serif;
	letter-spacing: .25pt;
}

p.MsoBodyText, li.MsoBodyText, div.MsoBodyText {
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 6.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle {
	mso-style-link: "Subtitle Char";
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 30.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 12.0pt;
	font-family: "Cambria", serif;
	letter-spacing: .65pt;
	font-style: italic;
}

a:link, span.MsoHyperlink {
	color: blue;
	text-decoration: underline;
}

a:visited, span.MsoHyperlinkFollowed {
	color: #954F72;
	text-decoration: underline;
}

em {
	letter-spacing: .5pt;
	border: none;
	font-weight: bold;
}

pre {
	mso-style-link: "HTML Preformatted Char";
	margin: 0in;
	margin-bottom: .0001pt;
	font-size: 10.0pt;
	font-family: "Courier New";
}

p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing {
	margin: 0in;
	margin-bottom: .0001pt;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph {
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: .5in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: .5in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: .5in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: .5in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.MsoQuote, li.MsoQuote, div.MsoQuote {
	mso-style-link: "Quote Char";
	margin-top: 10.0pt;
	margin-right: .25in;
	margin-bottom: 0in;
	margin-left: .25in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 10.0pt;
	font-family: "Calibri", sans-serif;
	font-style: italic;
}

p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote {
	mso-style-link: "Intense Quote Char";
	margin-top: 10.0pt;
	margin-right: .8in;
	margin-bottom: 14.0pt;
	margin-left: .7in;
	text-align: justify;
	line-height: 115%;
	border: none;
	padding: 0in;
	font-size: 10.0pt;
	font-family: "Calibri", sans-serif;
	font-weight: bold;
	font-style: italic;
}

span.MsoSubtleEmphasis {
	font-style: italic;
}

span.MsoIntenseEmphasis {
	font-weight: bold;
}

span.MsoSubtleReference {
	font-variant: small-caps;
}

span.MsoIntenseReference {
	font-variant: small-caps;
	letter-spacing: .25pt;
	text-decoration: underline;
}

span.MsoBookTitle {
	font-variant: small-caps;
	letter-spacing: .25pt;
	font-style: italic;
}

p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading {
	margin-top: 24.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
	font-weight: bold;
}

p.MsoTocHeadingCxSpFirst, li.MsoTocHeadingCxSpFirst, div.MsoTocHeadingCxSpFirst
	{
	margin-top: 24.0pt;
	margin-right: 0in;
	margin-bottom: 0in;
	margin-left: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
	font-weight: bold;
}

p.MsoTocHeadingCxSpMiddle, li.MsoTocHeadingCxSpMiddle, div.MsoTocHeadingCxSpMiddle
	{
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
	font-weight: bold;
}

p.MsoTocHeadingCxSpLast, li.MsoTocHeadingCxSpLast, div.MsoTocHeadingCxSpLast
	{
	margin: 0in;
	margin-bottom: .0001pt;
	line-height: 115%;
	font-size: 14.0pt;
	font-family: "Cambria", serif;
	font-weight: bold;
}

span.WW8Num7z0 {
	mso-style-name: WW8Num7z0;
	font-family: Symbol;
}

span.WW8Num8z0 {
	mso-style-name: WW8Num8z0;
	font-family: Symbol;
}

span.WW8Num9z0 {
	mso-style-name: WW8Num9z0;
	font-family: Symbol;
}

span.WW8Num10z0 {
	mso-style-name: WW8Num10z0;
	font-family: Symbol;
}

span.WW8Num12z0 {
	mso-style-name: WW8Num12z0;
	font-family: Symbol;
}

span.WW8Num13z0 {
	mso-style-name: WW8Num13z0;
	font-family: Symbol;
}

span.WW8Num13z1 {
	mso-style-name: WW8Num13z1;
	font-family: "Courier New";
}

span.WW8Num13z2 {
	mso-style-name: WW8Num13z2;
	font-family: Wingdings;
}

span.WW8Num18z0 {
	mso-style-name: WW8Num18z0;
	font-family: Symbol;
}

span.WW8Num18z1 {
	mso-style-name: WW8Num18z1;
	font-family: "Courier New";
}

span.WW8Num18z2 {
	mso-style-name: WW8Num18z2;
	font-family: Wingdings;
}

span.TitleChar {
	mso-style-name: "Title Char";
	mso-style-link: Title;
	font-family: "Cambria", serif;
	letter-spacing: .25pt;
}

span.Heading1Char {
	mso-style-name: "Heading 1 Char";
	mso-style-link: "Heading 1";
	font-family: "Cambria", serif;
	font-weight: bold;
}

span.CodeChar {
	mso-style-name: "Code Char";
	font-family: Consolas;
}

span.Heading2Char {
	mso-style-name: "Heading 2 Char";
	mso-style-link: "Heading 2";
	font-family: "Cambria", serif;
	font-weight: bold;
}

span.Heading3Char {
	mso-style-name: "Heading 3 Char";
	mso-style-link: "Heading 3";
	font-family: "Cambria", serif;
	font-weight: bold;
}

span.Heading4Char {
	mso-style-name: "Heading 4 Char";
	mso-style-link: "Heading 4";
	font-family: "Cambria", serif;
	font-weight: bold;
	font-style: italic;
}

span.Heading5Char {
	mso-style-name: "Heading 5 Char";
	mso-style-link: "Heading 5";
	font-family: "Cambria", serif;
	color: #7F7F7F;
	font-weight: bold;
}

span.Heading6Char {
	mso-style-name: "Heading 6 Char";
	mso-style-link: "Heading 6";
	font-family: "Cambria", serif;
	color: #7F7F7F;
	font-weight: bold;
	font-style: italic;
}

span.Heading7Char {
	mso-style-name: "Heading 7 Char";
	mso-style-link: "Heading 7";
	font-family: "Cambria", serif;
	font-style: italic;
}

span.Heading8Char {
	mso-style-name: "Heading 8 Char";
	mso-style-link: "Heading 8";
	font-family: "Cambria", serif;
}

span.Heading9Char {
	mso-style-name: "Heading 9 Char";
	mso-style-link: "Heading 9";
	font-family: "Cambria", serif;
	letter-spacing: .25pt;
	font-style: italic;
}

span.SubtitleChar {
	mso-style-name: "Subtitle Char";
	mso-style-link: Subtitle;
	font-family: "Cambria", serif;
	letter-spacing: .65pt;
	font-style: italic;
}

span.QuoteChar {
	mso-style-name: "Quote Char";
	mso-style-link: Quote;
	font-style: italic;
}

span.IntenseQuoteChar {
	mso-style-name: "Intense Quote Char";
	mso-style-link: "Intense Quote";
	font-weight: bold;
	font-style: italic;
}

span.NumberingSymbols {
	mso-style-name: "Numbering Symbols";
}

p.Heading, li.Heading, div.Heading {
	mso-style-name: Heading;
	margin-top: 12.0pt;
	margin-right: 0in;
	margin-bottom: 6.0pt;
	margin-left: 0in;
	line-height: 115%;
	page-break-after: avoid;
	font-size: 14.0pt;
	font-family: "Arial", sans-serif;
}

p.Index, li.Index, div.Index {
	mso-style-name: Index;
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

p.Code, li.Code, div.Code {
	mso-style-name: Code;
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 10.0pt;
	margin-left: 0in;
	font-size: 10.0pt;
	font-family: Consolas;
}

p.Framecontents, li.Framecontents, div.Framecontents {
	mso-style-name: "Frame contents";
	margin-top: 0in;
	margin-right: 0in;
	margin-bottom: 6.0pt;
	margin-left: 0in;
	line-height: 115%;
	font-size: 11.0pt;
	font-family: "Calibri", sans-serif;
}

span.HTMLPreformattedChar {
	mso-style-name: "HTML Preformatted Char";
	mso-style-link: "HTML Preformatted";
	font-family: "Courier New";
}

.MsoChpDefault {
	font-family: "Calibri", sans-serif;
}
/* Page Definitions */
@page WordSection1 {
	size: 8.5in 11.0in;
	margin: 1.0in 1.0in 1.0in 1.0in;
}

div.WordSection1 {
	page: WordSection1;
}
/* List Definitions */
ol {
	margin-bottom: 0in;
}

ul {
	margin-bottom: 0in;
}
-->
</style>

<style type="text/css"></style>
</head>

<body bgcolor="white" lang="EN-US" link="blue" vlink="#954F72">

	<div class="WordSection1">

		<div style="border: none; border-bottom: solid windowtext 1.0pt; padding: 0in 0in 1.0pt 0in">

			<p class="MsoTitleCxSpFirst">
				<span lang="X-NONE">CS 0449 – Project 4: /dev/</span>dice
			</p>

			<p class="MsoTitleCxSpLast">
				<span lang="X-NONE" style="font-size: 22.0pt">Due: </span><span style="font-size: 22.0pt">Sunday</span><span lang="X-NONE" style="font-size: 22.0pt">, </span><span style="font-size: 22.0pt">April
					10</span><span lang="X-NONE" style="font-size: 22.0pt">, 201</span><span style="font-size: 22.0pt">6,</span><span lang="X-NONE" style="font-size: 22.0pt"> at 11:59pm</span>
			</p>

		</div>

		<h1>
			<span lang="X-NONE">Project Description</span>
		</h1>

		<p class="MsoNormal">
			Standard UNIX and Linux systems come with a few special files like <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/dev/zero</span>, which returns nothing but zeros when
			it is read, and /<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">dev/random</span>, which returns random bytes. In this project, you will write a device driver to create a
			new device, <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/dev/dice</span><span style="font-size: 10.0pt; line-height: 115%"> </span>which returns a randomly selected
			roll of a 6-sided die.
		</p>

		<h1>
			<span lang="X-NONE">How It Will Work</span>
		</h1>

		<p class="MsoNormal">
			For this project we will need to create three parts: the device driver, the special file <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/dev/dice</span>, and a test
			program to convince ourselves it works
		</p>

		<p class="MsoNormal">The test program will be a solitaire implementation of the game of yahtzee.</p>

		<h1>
			<span lang="X-NONE">Driver Implementation</span>
		</h1>

		<p class="MsoNormal">Our device driver will be a character device that will implement a read function (which is the implementation of the read() syscall) and returns an appropriate die roll (a 1
			byte value from 0 to 5). As we discussed in class, the kernel does not have the full C Standard library available to it and so we need to get use a different function to get random numbers. By
			including &lt;linux/random.h&gt; we can use the function get_random_bytes(), which you can turn into a helper function to get a single byte:</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">
			<pre style="border: none; padding: 0in">
				<span lang="X-NONE" style="font-family: Consolas">unsigned char get_random_byte(int max) {</span>
			</pre>
			<pre style="border: none; padding: 0in">
				<span lang="X-NONE" style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned char c;</span>
			</pre>
			<pre style="border: none; padding: 0in">
				<span lang="X-NONE" style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get_random_bytes(&amp;c, 1);</span>
			</pre>
			<pre style="border: none; padding: 0in">
				<span lang="X-NONE" style="font-family: Consolas">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return c%max;</span>
			</pre>
			<pre style="border: none; padding: 0in">
				<span lang="X-NONE" style="font-family: Consolas">}</span>
			</pre>
		</div>

		<pre>
			<span lang="X-NONE" style="font-family: Consolas">&nbsp;</span>
		</pre>

		<h1>
			Yahtzee<span lang="X-NONE"> Implementation</span>
		</h1>

		<p class="MsoNormal">
			Yahtzee (also known as Poker Dice) is a multiplayer dice game, with fairly simple rules. For this assignment, you will be implementing a solitaire version where a user plays by themself. I highly
			suggest playing the game or at least reading the rules <a href="http://en.wikipedia.org/wiki/Yahtzee">http://en.wikipedia.org/wiki/Yahtzee</a>
		</p>

		<p class="MsoNormal">5 dice are rolled. The player can choose to keep any of the dice and is allowed to reroll any they do not want to keep. They may reroll up to twice, but at the end of the
			third roll, the five dice are finalized.</p>

		<p class="MsoNormal">After the user has finalized their five dice, they may place them into one of N categories:</p>

		<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" width="100%" style="width: 100.0%; border-collapse: collapse; border: none">
			<tbody>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; background: #D9D9D9; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">
							<b>Event</b>
						</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-left: none; background: #D9D9D9; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">
							<b>Score</b>
						</p>
					</td>
				</tr>
				<tr>
					<td width="100%" colspan="2" valign="top" style="width: 100.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">
							<b>Upper Section</b>
						</p>
					</td>
				</tr>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">Ones, Twos, Threes, Fours, Fives, Sixes</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">The sum of the dice with the appropriate value</p>
					</td>
				</tr>
				<tr>
					<td width="100%" colspan="2" valign="top" style="width: 100.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">
							<b>Lower Section</b>
						</p>
					</td>
				</tr>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">Three of a Kind, Four of a Kind</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">The total of all 5 dice</p>
					</td>
				</tr>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">Full House</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">25</p>
					</td>
				</tr>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">Small straight</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">30</p>
					</td>
				</tr>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">Large straight</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">40</p>
					</td>
				</tr>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">Yahtzee</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">50</p>
					</td>
				</tr>
				<tr>
					<td width="50%" valign="top" style="width: 50.0%; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">Chance</p>
					</td>
					<td width="50%" valign="top" style="width: 50.0%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt">
						<p class="MsoNoSpacing">The sum of the dice</p>
					</td>
				</tr>
			</tbody>
		</table>

		<p class="MsoNormal">&nbsp;</p>

		<p class="MsoNormal">We will not do anything special for a second Yahtzee. Note that the player can score 0 points in a category.</p>

		<p class="MsoNormal">If the total points of the Ones, Twos, Threes, Fours, Fives, and Sixes is 63 or more, the user gets a bonus of 35 points.</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Your roll:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">3 4 1 4 5</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Which dice to reroll? <b>1 2</b></span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Your second roll:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">5 6 1 4 5</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Which dice to reroll? <b>0</b></span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Place dice into:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">1) Upper Section</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">2) Lower Section</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas"><br> Selection? 1</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Place dice into:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">1) Ones</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">2) Twos</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">3) Threes</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">4) Fours</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">5) Fives</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">6) Sixes</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas"><br> Selection? 5</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Your score so far is: 10</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Ones: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fours:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Twos:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fives:
					10</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Threes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sixes:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Upper Section Bonus: 0</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Three of a Kind:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Four of a Kind:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Small Straight:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Large Strait:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Full House:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Yahtzee:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">Chance:</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">&nbsp;</span>
			</p>

			<p class="MsoNoSpacing" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; font-family: Consolas">…</span>
			</p>

		</div>

		<p class="MsoNormal">&nbsp;</p>

		<p class="MsoNormal">The game ends when all categories have been assigned a point (13 turns).</p>

		<p class="MsoNormal">For this assignment you need to do the following:</p>

		<p class="MsoNormal" style="margin-left: .25in; text-indent: 0in">
			<span style="font-family: Symbol">·<span style="font: 7.0pt&amp;amp;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Write a program that allows a player to play Yahtzee
		</p>

		<p class="MsoNormal" style="margin-left: .25in; text-indent: 0in">
			<span style="font-family: Symbol">·<span style="font: 7.0pt&amp;amp;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Gets each die to display by reading one byte from the <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/dev/dice</span> file.
		</p>

		<h1>
			<span lang="X-NONE">Hints and Suggestions</span>
		</h1>

		<ul style="margin-top: 0in" type="disc">
			<li class="MsoNormal">Use the qsort function to sort the dice for scoring. It makes finding multiples and straights much easier</li>
			<li class="MsoNormal">You may write the yahtzee program using stdlib’s rand() for testing, but make sure you eventually replace it with your read of <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/dev/dice</span></li>
		</ul>

		<h1>
			<span lang="X-NONE">Installation and Example </span>
		</h1>

		<ol style="margin-top: 0in" start="1" type="1">
			<li class="MsoNormal">On <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">thoth.cs.pitt.edu</span>, login and <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cd</span><span style="font-size: 10.0pt; line-height: 115%"> </span>to your <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/u/SysLab/USERNAME</span><span style="font-size: 10.0pt; line-height: 115%"> </span>directory.
			</li>
			<li class="MsoNormal"><span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">tar xvfz ../shared/hello_dev.tar.gz</span></li>
			<li class="MsoNormal"><span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cd hello_dev</span></li>
			<li class="MsoNormal">Open the Makefile with the editor of your choice. (E.g., <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">pico Makefile</span>)
			</li>
			<li class="MsoNormal">We need to setup the path to compile against the proper version of the kernel. To do this, change the line:</li>
		</ol>

		<p class="Code" style="margin-left: .5in">KDIR&nbsp; := /lib/modules/$(shell uname -r)/build</p>

		<p class="MsoNormal" style="margin-left: .5in">to</p>

		<p class="Code" style="margin-left: .5in">KDIR&nbsp; := /u/SysLab/shared/linux-2.6.23.1</p>

		<ol style="margin-top: 0in" start="6" type="1">
			<li class="MsoNormal">Build the kernel object. The ARCH=i386 is important because we are building a 32-bit kernel on a 64-bit machine.</li>
		</ol>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; margin-left: .5in; margin-right: 0in">

			<p class="Code" style="border: none; padding: 0in">make ARCH=i386</p>

		</div>

		<ol style="margin-top: 0in" start="7" type="1">
			<li class="MsoNormal">Download and launch QEMU. For Windows users, you can just double click the <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">qemu-win.bat</span><span
				style="font-size: 10.0pt; line-height: 115%"> </span>that is supplied in the zipfile available on my website. Mac users should download and install <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">Q.app</span><span style="font-size: 10.0pt; line-height: 115%"> </span>and use the <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">tty.qcow2</span><span style="font-size: 10.0pt; line-height: 115%"> </span>disk image provided in the main zipfile. Linux users
				are left to install qemu as appropriate and also use the <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">tty.qcow2</span><span
				style="font-size: 10.0pt; line-height: 115%"> </span>disk image provided in the main zipfile.
			</li>
			<li class="MsoNormal">When Linux boots under QEMU login using the root/root account (username/password).</li>
			<li class="MsoNormal">We now need to download the kernel module you just built into the kernel using scp:</li>
		</ol>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; margin-left: .5in; margin-right: 0in">

			<p class="Code" style="border: none; padding: 0in">scp USERNAME@thoth.cs.pitt.edu:/u/SysLab/USERNAME/hello_dev/hello_dev.ko .</p>

		</div>

		<ol style="margin-top: 0in" start="10" type="1">
			<li class="MsoNormal">Load the driver using insmod:</li>
		</ol>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; margin-left: .5in; margin-right: 0in">

			<p class="MsoNormal" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">insmod hello_dev.ko</span>
			</p>

		</div>

		<ol style="margin-top: 0in" start="11" type="1">
			<li class="MsoNormal">We now need to make the device file in /dev. First, we need to find the MAJOR and MINOR numbers that identify the new device:</li>
		</ol>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; margin-left: .5in; margin-right: 0in">

			<p class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cd /sys/class/misc/hello</span>
			</p>

			<p class="MsoNormal" style="margin-bottom: 12.0pt; border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cat dev </span>
			</p>

		</div>

		<ol style="margin-top: 0in" start="12" type="1">
			<li class="MsoNormal">The output should be a number like 10:63. The 10 is the MAJOR and the 63 is the MINOR.</li>
			<li class="MsoNormal">We use <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">mknod</span><span style="font-size: 10.0pt; line-height: 115%"> </span>to make a special
				file. The name will be <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">hello</span><span style="font-size: 10.0pt; line-height: 115%"> </span>and it is a character
				device. The 10 and the 63 correspond to the MAJOR and MINOR numbers we discovered above (if different, use the ones you saw.)
			</li>
		</ol>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 1.0pt 1.0pt 1.0pt; margin-left: .5in; margin-right: 0in">

			<p class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cd /dev/</span>
			</p>

			<p class="MsoNormal" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">mknod hello c 10 63</span>
			</p>

		</div>

		<ol style="margin-top: 0in" start="14" type="1">
			<li class="MsoNormal">We can now read the data out of <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/dev/hello</span><span
				style="font-size: 10.0pt; line-height: 115%"> </span>with a simple call to cat:
			</li>
		</ol>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; margin-left: .5in; margin-right: 0in">

			<p class="MsoNormal" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cat /dev/hello</span>
			</p>

		</div>

		<ol style="margin-top: 0in" start="15" type="1">
			<li class="MsoNormal">You should see “Hello, world!” which came from the driver. We can clean up by removing the device and unloading the module:</li>
		</ol>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; margin-left: .5in; margin-right: 0in">

			<p class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">rm /dev/hello</span>
			</p>

			<p class="MsoNormal" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">rmmod hello_dev.ko</span>
			</p>

		</div>

		<h1>
			<span lang="X-NONE">What to Do Next</span>
		</h1>

		<p class="MsoNormal">The code for the example we went through comes from:</p>

		<p class="MsoNormal">
			<a href="http://www.linuxdevcenter.com/pub/a/linux/2007/07/05/devhelloworld-a-simple-introduction-to-device-drivers-under-linux.html?page=2">http://www.linuxdevcenter.com/pub/a/linux/2007/07/05/devhelloworld-a-simple-introduction-to-device-drivers-under-linux.html?page=2</a>
		</p>

		<p class="MsoNormal">Read that while going through the source to get an idea of what the Module is doing. Start with the third section entitled “Hello, World! Using /dev/hello_world” and read up
			until the author starts describing udev rules; we are not using udev under QEMU.</p>

		<p class="MsoNormal">
			When you have an idea of what is going on, make a new directory under your <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/u/SysLab/USERNAME</span><span
				style="font-size: 10.0pt; line-height: 115%"> </span>directory called <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">dice_driver</span>:
		</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="MsoNormal" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">mkdir dice_driver</span>
			</p>

		</div>

		<p class="MsoNormal">
			Copy and rename the <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">hello_dev.c</span><span style="font-size: 10.0pt; line-height: 115%"> </span>from the example, and copy
			over the <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">Makefile</span>. Edit the <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">Makefile</span><span
				style="font-size: 10.0pt; line-height: 115%"> </span>to build your new file. Change all the references of “hello” to “dice_driver”.
		</p>

		<h1>
			<span lang="X-NONE">Building the Driver</span>
		</h1>

		<p class="MsoNormal">
			To build any changes you have made, on <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">thoth</span><span style="font-size: 10.0pt; line-height: 115%"> </span>in your <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">dice_driver</span><span style="font-size: 10.0pt; line-height: 115%"> </span>directory, simply:
		</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="Code" style="border: none; padding: 0in">make ARCH=i386</p>

		</div>

		<p class="MsoNormal">If you want to force a rebuild of everything you may want to remove the object files first:</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="Code" style="border: none; padding: 0in">rm *.o</p>

		</div>

		<h1>
			<span lang="X-NONE">Copying the Files to QEMU</span>
		</h1>

		<p class="MsoNormal">
			From QEMU, you will need to download the driver that you just built.&nbsp; Use <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">scp</span> to download the driver to a home
			directory (<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/root/ </span>if root):
		</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="Code" style="border: none; padding: 0in">scp USERNAME@thoth.cs.pitt.edu:/u/SysLab/USERNAME/dice_driver/dice_driver.ko .</p>

		</div>

		<h1>
			<span lang="X-NONE">Loading the Driver into the Kernel in QEMU</span>
		</h1>

		<p class="MsoNormal">
			As root (either by logging in or via <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">su</span>):
		</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="Code" style="border: none; padding: 0in">insmod dice_driver.ko</p>

		</div>

		<h1>
			<span lang="X-NONE">&nbsp;</span>
		</h1>

		<h1>
			<span lang="X-NONE">Making the /dev/</span>dice<span lang="X-NONE"> Device</span>
		</h1>

		<p class="MsoNormal">Like in the example, we’ll need to determine the MAJOR and MINOR numbers for this particular driver.</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cd </span><span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/sys/class/misc/dice_driver</span>
			</p>

			<p class="MsoNormal" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">cat dev</span>
			</p>

		</div>

		<p class="MsoNormal">
			and use those numbers to make the<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas"> /dev/dice</span> file:
		</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="Code" style="border: none; padding: 0in">
				cd /dev<br> mknod dice c MAJOR MINOR
			</p>

		</div>

		<h1>
			<span lang="X-NONE">Unloading the Driver from the Kernel in QEMU</span>
		</h1>

		<p class="MsoNormal">
			As root (either by logging in or via <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">su</span>):
		</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="Code" style="border: none; padding: 0in">rmmod dice_driver.ko</p>

		</div>

		<p class="MsoNormal">
			Then you can remove the <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/dev/dice</span><span style="font-size: 10.0pt; line-height: 115%"> </span>file:
		</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="MsoNormal" style="border: none; padding: 0in">
				<span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">rm /dev/dice</span>
			</p>

		</div>

		<h1>
			<span lang="X-NONE">Implementing and Building the </span>yahtzee<span lang="X-NONE"> Program</span>
		</h1>

		<p class="MsoNormal">Since thoth is a 64-bit machine and QEMU emulates a 32-bit machine, we should build with the -m32 flag:</p>

		<div style="border: solid windowtext 1.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt">

			<p class="Code" style="border: none; padding: 0in">gcc –m32 –o yahtzee yahtzee.c</p>

		</div>

		<h1>
			<span lang="X-NONE">Running </span>Yahtzee
		</h1>

		<p class="MsoNormal">
			We cannot run our <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">yahtzee</span> program on <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">thoth.cs.pitt.edu</span>
			because its kernel does not have the device driver loaded. However, we can test the program under QEMU once we have installed the new driver. We first need to download <span
				style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">yahtzee</span> using <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">scp</span> as we did for the
			driver. However, we can just run it from our home directory without any installation necessary.
		</p>

		<h1>
			<span lang="X-NONE">File Backups</span>
		</h1>

		<p class="MsoNormal">
			One of the major contributions the university provides for the AFS filesystem is nightly backups. However, the <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/u/SysLab/</span>
			partition is <b>not</b> part of AFS space. Thus, any files you modify under your personal directory in <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">/u/SysLab/</span>
			are not backed up. If there is a catastrophic disk failure, all of your work will be irrecoverably lost. As such, it is my recommendation that you:
		</p>

		<p class="MsoNormal">
			<b><span style="font-size: 12.0pt; line-height: 115%; color: red">Backup all the files you change under </span></b><b><span
				style="font-size: 12.0pt; line-height: 115%; font-family: Consolas; color: red">/u/SysLab</span></b><b><span style="font-size: 12.0pt; line-height: 115%; color: red"> to your </span></b><b><span
				style="font-size: 12.0pt; line-height: 115%; font-family: Consolas; color: red">~/private/</span></b><b><span style="font-size: 12.0pt; line-height: 115%; color: red"> directory frequently!</span></b>
		</p>

		<p class="MsoNormal">
			Loss of work not backed up is not grounds for an extension. <span style="color: red; text-transform: uppercase">You have been warned</span>.
		</p>

		<h1>
			<span lang="X-NONE">Hints and Notes</span>
		</h1>

		<ul style="margin-top: 0in" type="disc">
			<li class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%"><span style="font-size: 10.0pt; line-height: 150%; font-family: Consolas">printk()</span> is the
				version of <span style="font-size: 10.0pt; line-height: 150%; font-family: Consolas">printf()</span> you can use for debugging messages from the kernel.</li>
			<li class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%">In the driver, you can use some standard C functions, but not all. They must be part of the kernel
				to work.</li>
			<li class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%">In the <span style="font-size: 10.0pt; line-height: 150%; font-family: Consolas">yahtzee</span><span
				style="font-size: 10.0pt; line-height: 150%"> </span>program, you may use any of the C standard library functions.
			</li>
			<li class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%">As root, typing <span style="font-size: 10.0pt; line-height: 150%; font-family: Consolas">poweroff</span><span
				style="font-size: 10.0pt; line-height: 150%"> </span>in QEMU will shut it down cleanly.
			</li>
			<li class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%">If the module crashes, it may become impossible to delete the file you created with mkdev in /dev.
				If that happens, just grab a new disk image and start over. It’s why we’re developing in a virtual machine as opposed to a real one.</li>
		</ul>

		<h1>
			<span lang="X-NONE">Requirements and Submission</span>
		</h1>

		<p class="MsoNormal">You need to submit:</p>

		<ul style="margin-top: 0in" type="disc">
			<li class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%">Your <span style="font-size: 10.0pt; line-height: 150%; font-family: Consolas">dice_driver.c</span><span
				style="font-size: 10.0pt; line-height: 150%"> </span>file and the <span style="font-size: 10.0pt; line-height: 150%; font-family: Consolas">Makefile</span><span
				style="font-size: 10.0pt; line-height: 150%"> </span></li>
			<li class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%">Your well-commented <span style="font-size: 10.0pt; line-height: 150%; font-family: Consolas">yahtzee
			</span>program’s source
			</li>
		</ul>

		<p class="MsoNormal" style="margin-bottom: 0in; margin-bottom: .0001pt; line-height: 150%">&nbsp;</p>

		<p class="MsoNormal">
			Make a tar.gz file named <span style="font-size: 10.0pt; line-height: 115%; font-family: Consolas">USERNAME-project4.tar.gz</span>
		</p>

		<p class="MsoNormal">
			<b>Copy your archive to the submission directory:</b>
		</p>

		<p class=MsoNormal style='line-height: normal'>
			<b><span style='font-size: 12.0pt; font-family: "Times New Roman", serif; color: red'>Copy your archive to the directory:</span></b>
		</p>

		<p class=MsoNormal style='margin-left: .5in; line-height: normal'>
			<span style='font-size: 12.0pt; font-family: Consolas'>~aus4/submit/449/</span>
		</p>

		<p class=MsoNormal style='text-align: justify; line-height: normal'>
			<i>Make sure you name the file <b>USERNAME_p4.tar.gz</b> where USERNAME is your Pitt username (e.g. aus4), and that you have your name in the comments of your source file.
			</i>
		</p>

		<p class=MsoNormal style='text-align: justify; line-height: normal'>
			Note that this directory is insert-only, you may not delete or modify your submissions once in the directory. If you’ve made a mistake before the deadline, resubmit with a number suffix like <span
				style='font-family: Consolas'>USERNAME_p4_1.tar.gz</span>
		</p>
		
		<p class=MsoNormal style='text-align: justify; line-height: normal'>The highest numbered file before the deadline will be the one that is graded, however for simplicity, please make sure you’ve
			done all the work and included all necessary files before you submit.</p>

		<p class=MsoNormal style='text-align: justify; line-height: normal'>
			If you are experiencing some system problems preventing you from submitting your project archive to the submission folder, send the project archive together with the description of the problem you are experiencing to both me and your TA.</span>
		</p>

		<p class=MsoNormal style='margin-left: .5in'>&nbsp;</p>

	</div>




</body>
</html>